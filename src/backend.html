<!DOCTYPE html>
<html lang="en">

<head>
    @@include('layout/meta.html', { "title" : "Backend" })
    <script src="./js/backend.js"></script>
    <script src="./js/backendCheck.js"></script>
</head>

<body>
    <div class="backendContainer">
        <!-- 左邊section -->
        <section class="beMenu">
            <div class="logo ps_1 pe_1">
                <img src="./images/nav_logo_web.webp" alt="">
            </div>
            <ul>
                <li onclick="openClass(event,'mainElm1')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink currentM"><i
                        class="fa-solid fa-user pr_1"></i>
                    <p>會員管理</p>
                </li>
                <li onclick="openClass(event,'mainElm2')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-solid fa-lightbulb pr_1"></i>
                    <p>商品管理</p>
                </li>
                <li onclick="openClass(event,'mainElm3')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-solid fa-list-ul pr_1"></i>
                    <p>訂單管理</p>
                </li>
                <li onclick="openClass(event,'mainElm4')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-solid fa-tag pr_1"></i>
                    <p>優惠活動管理</p>
                </li>
                <li onclick="openClass(event,'mainElm5')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-solid fa-flag pr_1"></i></i>
                    <p>最新消息管理</p>
                </li>
                <li onclick="openClass(event,'mainElm6')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-solid fa-images pr_1"></i>
                    <p>輪播管理</p>
                </li>
                <li onclick="openClass(event,'mainElm7')" class="ps_1 pe_1 pl_1 pr_1 p1 tablink"><i
                        class="fa-brands fa-hashnode pr_1"></i>
                    <p>後台管理員</p>
                </li>
                <li class="ps_1 pe_1 pl_1 pr_1 p1"><i class="fa-solid fa-right-from-bracket pr_1"></i>
                    <p onclick="admin()">登出</p>
                </li>
            </ul>
        </section>
        <!-- 右邊section -->
        <div class="beCont">
            <!-- N會員管理 -->
            <section class="mem_content" id="mainElm1">
                <div id="membList">
                    <!-- N修改會員燈箱 -->
                    <div class="" id="N_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Member</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="membersModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width: 50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="member_no"
                                                    id="" v-model="popupData.member_no" readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="member_name" id="" v-model="popupData.member_name"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Birthday</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date"
                                                    name="member_birthday" id="" v-model="popupData.member_birthday"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Phone</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel" name="member_tel"
                                                    id="" v-model="popupData.member_tel" readonly="readonly"></div>
                                        </div>

                                    </div>
                                    <div style="width: 50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Address</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="member_address" id="" v-model="popupData.member_address"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">E-mail</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="email"
                                                    name="member_mail" id="" v-model="popupData.member_mail"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="member_state" id="" v-model="popupData.member_state">
                                                    <option value="0">正常</option>
                                                    <option value="1">凍結</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="N_EditBtnCancel" type="button">Cancel</button>
                                    <button id="N_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="membersSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Member Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 ps_2"></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">會員編號</p>
                            <p class="p1 pr_1 font_w5">會員姓名</p>
                            <p class="p1 pr_1 font_w5 listGrow">會員帳號(信箱)</p>
                            <p class="p1 pr_1 font_w5">會員生日</p>
                            <p class="p1 pr_1 font_w5">會員電話</p>
                            <p class="p1 pr_1 font_w5 listGrow">會員地址</p>
                            <p class="p1 pr_1 font_w5">會員狀態</p>
                            <p></p>
                        </div>
                        <ul>
                            <template v-for="membRow in membRows">
                                <li is="N_menu" v-bind="membRow" :key="membRow.member_no"
                                    @edit-handler="editHandler(membRow.member_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let membRow = Vue.component('N_menu', {
                    props: ['member_no', 'member_name', 'member_mail', 'member_birthday', 'member_tel', 'member_address', 'member_state'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{member_mail}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_birthday}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_tel}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{member_address}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_state ? '凍結' : '正常'}}</p>
                                <button class="p1 bkbtn" id="N_Edit" @click="$emit('edit-handler')" type="button">Edit</button>
                            </div>
                        </li>
                    `,
                });
                let membersVue =
                    new Vue({
                        el: '#membList',
                        data: {
                            fucusNo: 0,
                            membRows: [],
                            popupData: {
                                member_no: '',
                                member_name: ``,
                                member_mail: ``,
                                member_tel: ``,
                                member_birthday: ``,
                                member_address: ``,
                                member_state: ``
                            },
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                membersVue.membRows = JSON.parse(xhr.responseText);

                            }
                            xhr.open("get", "getMembers.php", true);
                            xhr.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.membRows.find(v => v.member_no == this.fucusNo)) ? (this.membRows.find(v => v.member_no == this.fucusNo)) : this.membRows[0];
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            membersSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_membersUpdateToDb.php", true);
                                let membersSubDb = new FormData(document.getElementById("membersModify"));
                                xhr.send(membersSubDb);
                                document.getElementById("N_edit_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
            <!-- A商品管理 -->
            <section class="mem_content" id="mainElm2">
                <div id="productList">
                    <!-- A商品燈箱 -->
                    <div class="" id="A_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Create Product</p>
                            <form id="productsForm" enctype="multipart/form-data" class="ps_1 pe_1 pl_1 pr_2">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="product_no" id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Category</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="category_no" id="">
                                                    <option value="1">Floor Lamps</option>
                                                    <option value="2">Pendant</option>
                                                    <option value="3">Home Accent</option>
                                                    <option value="4">Table Lamps</option>
                                                    <option value="5">Wall Lamps</option>
                                                    <option value="6">Chandaliers</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Designer</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="des_no" id="">
                                                    <option value="1">設計師1</option>
                                                    <option value="2">設計師2</option>
                                                    <option value="3">設計師3</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                    name="product_name" id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                    style="vertical-align:top">Description</label></div>
                                            <div class="pl_1 pr_1"><textarea class="p1 tArea" name="description" id=""
                                                    cols="23" rows="6"></textarea></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                    style="vertical-align:top">Specification</label></div>
                                            <div class="pl_1 pr_1"><textarea class="p1 tArea" name="specification" id=""
                                                    cols="23" rows="6"></textarea></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Price</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_price" type="text"
                                                    name="price" id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">On Market</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="on_market" id="">
                                                    <option value="0">未上架</option>
                                                    <option value="1">已上架</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">In Stork</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="in_stock" id="">
                                                    <option value="0">無庫存</option>
                                                    <option value="1">有庫存</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 me_1 LBcol" style="border-bottom: 3px solid #000">
                                            <p class="pl_1 pr_1 h2">Promotions</p>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="promotions_no" id="">
                                                    <option>請選擇優惠活動</option>
                                                    <option v-for="item in promotions_select_list"
                                                        :key="item.promotions_no" :value="item.promotions_no">
                                                        {{item.promotions_name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Sale
                                                    Price</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_price" type="text"
                                                    name="promotions_price" id=""></div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image1</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="A_upFile[]" id="A_one_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="A_one_membersImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show[]" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image2</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="A_upFile[]" id="A_two_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="A_two_membersImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show[]" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image3</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="A_upFile[]" id="A_three_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="A_three_membersImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show[]" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image4</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="A_upFile[]" id="A_four_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="A_four_membersImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show[]" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="A_btnCancel" type="button">Cancel</button>
                                    <button id="A_btnAdd" class="ml_1 p1 bkbtn" type="button">Confirm</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- A修改商品燈箱 -->
                    <div class="" id="A_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Product</p>
                            <form class="ps_1 pe_1 pl_1 pr_2" id="productsModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="product_no" id="" v-model="popupData.product_no"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Category</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="category_no" id="" v-model="popupData.category_no">
                                                    <option value="1">Floor Lamps</option>
                                                    <option value="2">Pendant</option>
                                                    <option value="3">Home Accent</option>
                                                    <option value="4">Table Lamps</option>
                                                    <option value="5">Wall Lamps</option>
                                                    <option value="6">Chandaliers</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Designer</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="des_no" id="" v-model="popupData.des_no">
                                                    <option value="1">設計師1</option>
                                                    <option value="2">設計師2</option>
                                                    <option value="3">設計師3</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="product_name"
                                                    id="" v-model="popupData.name"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                    style="vertical-align:top">Description</label></div>
                                            <div class="pl_1 pr_1"><textarea class="p1 tArea" name="description" id=""
                                                    cols="23" rows="6" v-model="popupData.description"></textarea></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                    style="vertical-align:top">Specification</label></div>
                                            <div class="pl_1 pr_1"><textarea class="p1 tArea" name="specification" id=""
                                                    cols="23" rows="6" v-model="popupData.specification"></textarea>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Price</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_price" type="text"
                                                    name="price" id="" v-model="popupData.price"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">On Market</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="on_market" id="" v-model="popupData.on_market">
                                                    <option value="0">未上架</option>
                                                    <option value="1">已上架</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">In Stork</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="in_stock" id="" v-model="popupData.in_stock">
                                                    <option value="0">無庫存</option>
                                                    <option value="1">有庫存</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 me_1 LBcol" style="border-bottom: 3px solid #000">
                                            <p class="pl_1 pr_1 h2">Promotions</p>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="promotions_no" id="promotions_no" v-model="popupData.promotions_no">
                                                    <option>請選擇優惠活動</option>
                                                    <option v-for="item in promotions_select_list"
                                                        :key="item.promotions_no" :value="item.promotions_no">{{
                                                        item.promotions_name }}</option>
                                                </select>
                                            </div>

                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Sale
                                                    Price</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_price" type="text"
                                                    name="promotions_price" id="" v-model="popupData.promotions_price">
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <!-- <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image1</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="prodone_img_origin"
                                                    :value="imageData.image_path">
                                                
                                                <input type="file" name="A_E_one_upFile" id="A_E_one_upFile">
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="image_path"
                                                        id="A_E_one_newsImage" :src="'images//'+ imageData.image_path"
                                                        alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show" v-model="imageData.product_show" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image2</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="prodone_img_origin"
                                                    :value="popupData.image_path">
                                                
                                                <input type="file" name="A_E_two_upFile" id="A_E_two_upFile">
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="image_path"
                                                        id="A_E_two_newsImage" :src="'images//'+ popupData.image_path"
                                                        alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show" v-model="popupData.product_show" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image3</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="prodone_img_origin"
                                                    :value="popupData.image_path">
                                                
                                                <input type="file" name="A_E_three_upFile" id="A_E_three_upFile">
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="image_path"
                                                        id="A_E_three_newsImage" :src="'images//'+ popupData.image_path"
                                                        alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol" style="border-bottom: 1px dashed #ccc">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show" v-model="popupData.product_show" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image4</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="prodone_img_origin"
                                                    :value="popupData.image_path">
                                                
                                                <input type="file" name="A_E_four_upFile" id="A_E_four_upFile">
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="image_path"
                                                        id="A_E_four_newsImage" :src="'images//'+ popupData.image_path"
                                                        alt="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Show</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="product_show" v-model="popupData.product_show" id="">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </div>
                                        </div> -->
                                        <ul>
                                            <template v-for="prodimgRow in imageData">
                                                <li is="Aimg_menu" v-bind="prodimgRow"></li>
                                            </template>
                                        </ul>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="A_EditBtnCancel" type="button">Cancel</button>
                                    <button id="A_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="productsSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Product Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 newListBtn"><button class="p1 bkbtn" id="A_New">✚ NEW</button></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">商品編號</p>
                            <p class="p1 pr_1 font_w5 listGrow">商品名稱</p>
                            <p class="p1 pr_1 font_w5">商品類別</p>
                            <p class="p1 pr_1 font_w5 listGrow">商品設計師</p>
                            <p class="p1 pr_1 font_w5 listGrow">商品介紹</p>
                            <p class="p1 pr_1 font_w5 listGrow">商品規格</p>
                            <p class="p1 pr_1 font_w5">商品單價</p>
                            <p class="p1 pr_1 font_w5">商品狀態</p>
                            <p class="p1 pr_1 font_w5">商品庫存</p>
                            <p></p>
                        </div>
                        <ul>
                            <template v-for="prodRow in prodRows">
                                <li is="A_menu" v-bind="prodRow" :key="prodRow.product_no"
                                    @edit-handler="editHandler(prodRow.product_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let prodimgRow = Vue.component('Aimg_menu', {
                    props: ['image_no', 'product_no', 'image_path','product_show'],
                    template: `
                        <li>
                            <div class="ps_1 pe_1 LBcol">
                                <div class="pl_1 pr_1 LBcolTitle">
                                    <label class="p1" for="">Image{{image_no}}</label>
                                </div>
                                <div class="pl_1 pr_1">
                                    <input type="hidden" name="prod_img_origin[]"
                                        :value="image_path">
                                    <!-- <p style="padding-top: 8px" name="prodone_img_origin"
                                        :value="image_path">目前檔名：{{image_path}}</p> -->
                                    <input type="file" name="A_E_upFile[]" class="A_E_upFile">
                                    <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                        <img style="width: auto; max-width:100%; height: 173px" name="image_path[]" class="A_E_newsImage" :src="'images//'+ image_path" alt="">
                                    </div>
                                </div>
                            </div>
                            <div class="ps_1 pe_1 LBcol">
                                <div class="pl_1 pr_1 LBcolTitle">
                                    <label class="p1" for="">Show</label>
                                </div>
                                <div class="pl_1 pr_1">
                                    <select name="product_show[]" v-model="product_show" id="">
                                        <option value="0">No</option>
                                        <option value="1">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </li>
                    `,
                })
                let prodRow = Vue.component('A_menu', {
                    props: ['product_no', 'name', 'category_no', 'des_no', 'description', 'specification', 'price', 'on_market', 'in_stock', 'category_name', 'des_name', 'product_show'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{product_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{category_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{des_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{description}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{specification}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{price}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{on_market ? '已上架' : '未上架'}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{in_stock ? '有庫存' : '無庫存'}}</p>
                                <button class="p1 bkbtn" id="A_Edit" @click="$emit('edit-handler')" type="button">Edit</button>
                            </div>
                        </li>
                    `,
                })
                let productsVue =
                    new Vue({
                        el: '#productList',
                        data: {
                            fucusNo: 0,
                            prodRows: [],
                            imageRows:[],
                            imageData:[],
                            popupData: {
                                product_no: '',
                                name: ``,
                                category_name: ``,
                                des_name: ``,
                                description: ``,
                                specification: ``,
                                price: ``,
                                on_market: ``,
                                in_stock: ``,
                                product_show: ``,
                            },
                            promotions_select_list: []
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                productsVue.prodRows = JSON.parse(xhr.responseText).prodRows;
                                 productsVue.imageRows = JSON.parse(xhr.responseText).imageRows;
                                // console.log(productsVue.imageRows);

                            }
                            xhr.open("get", "getProducts.php", true);
                            xhr.send(null);

                            let xhrP = new XMLHttpRequest();
                            xhrP.onload = function () {
                                productsVue.promotions_select_list = JSON.parse(xhrP.responseText);
                            }
                            xhrP.open("get", "getPromotions.php", true);
                            xhrP.send(null);

                            
                        },
                        computed: {
                            focusObj() {
                                return (this.prodRows.find(v => v.product_no == this.fucusNo)) ? (this.prodRows.find(v => v.product_no == this.fucusNo)) : this.prodRows[0];
                            },
                            focusimgObj() {
                                return this.imageRows.filter(v => v.product_no == this.fucusNo);
                                // return 123;
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                // console.log(nVal);
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                            focusimgObj(gVal) {
                                this.imageData = JSON.parse(JSON.stringify(gVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            productsSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_productsUpdateToDb.php", true);
                                let productsSubDb = new FormData(document.getElementById("productsModify"));
                                xhr.send(productsSubDb);
                                document.getElementById("A_edit_lightBox").style.display = "none";
                            },
                            // productInsert(){
                            //     let xhr = new XMLHttpRequest();
                            //     xhr.onload = () => {
                            //         alert(xhr.responseText);
                            //     };
                            //     xhr.open("post", "backend_productsInsert.php", true);
                            //     let productsSubDb = new FormData(document.getElementById("productsModify"));
                            //     xhr.send(productsSubDb);

                            // }
                        },
                    })
            </script>

            <!-- O訂單管理 -->
            <section class="mem_content" id="mainElm3">
                <div id="orderList">
                    <!-- O修改訂單燈箱 -->
                    <div class="" id="O_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Order</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="ordersModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="order_no"
                                                    id="" v-model="popupData.order_no" readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Member No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="member_no"
                                                    id="" v-model="popupData.member_no" readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Order
                                                    Date Time</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="text"
                                                    name="order_datetime" id="" v-model="popupData.order_datetime"
                                                    readonly="readonly">
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="order_state" id="" v-model="popupData.order_state">
                                                    <option value="待處理">待處理</option>
                                                    <option value="待出貨">待出貨</option>
                                                    <option value="已出貨">已出貨</option>
                                                    <option value="訂單完成">訂單完成</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Order
                                                    Total</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="text" name="order_total"
                                                    id="" v-model="popupData.order_total" readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for=""
                                                    style="vertical-align:top">Order Notes</label></div>
                                            <div class="pl_1 pr_1"><textarea class="p1 tArea" name="order_notes" id=""
                                                    cols="23" rows="5" v-model="popupData.order_notes"
                                                    readonly="readonly"></textarea></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Payer
                                                    Name</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="payer_name" id="" v-model="popupData.payer_name"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Payer
                                                    Phone</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel"
                                                    name="payer_phone" id="" v-model="popupData.payer_phone"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Payer
                                                    Address</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="payer_address" id="" v-model="popupData.payer_address"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Credit Card</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel" maxlength="16"
                                                    name="credit_card" id="" v-model="popupData.credit_card"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1" for="">Card
                                                    Date (year month)</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel" maxlength="4"
                                                    name="card_date" id="" v-model="popupData.card_date"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Credit Card CheckCode</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel" maxlength="3"
                                                    name="card_checkCode" id="" v-model="popupData.card_checkCode"
                                                    readonly="readonly">
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Recipient Name</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="recipient_name" id="" v-model="popupData.recipient_name"
                                                    readonly="readonly">
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Recipient Phone</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="tel"
                                                    name="recipient_phone" id="" v-model="popupData.recipient_phone"
                                                    readonly="readonly">
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Recipient Address</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="recipient_address" id="" v-model="popupData.recipient_address"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle LBcolCredit"><label class="p1"
                                                    for="">Recipient Date Time</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="recipient_datetime" id=""
                                                    v-model="popupData.recipient_datetime" readonly="readonly"></div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <div class="formOne formThree">
                                <div class="ml_1 mr_1 ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                                    <h1 class="h1 font_w5 fontTitle">Order Detail</h1>
                                </div>
                                <div class="ps_1 pe_1 pl_1 pr_1">
                                    <div class="pr_1 pe_1"></div>
                                    <div class="backend_title">
                                        <p class="p1 pr_1 font_w5 listGrow">Product Name</p>
                                        <p class="p1 pr_1 font_w5 listGrow">Quantity</p>
                                        <p class="p1 pr_1 font_w5 listGrow">Price</p>
                                        <p class=""></p>
                                    </div>
                                    <ul>
                                        <template v-for="detailRow in popupDetail">
                                            <li is="OD_menu" v-bind="detailRow"></li>
                                        </template>
                                    </ul>
                                </div>
                            </div>
                            <div class="ps_1 pe_1 pr_1 lastBtn">
                                <button class="ml_1 p1 bkbtn" id="O_EditBtnCancel" type="button">Cancel</button>
                                <button id="O_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                    @click="ordersSub">OK</button>
                            </div>

                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Order Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 ps_2"></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">訂單編號</p>
                            <p class="p1 pr_1 font_w5">會員編號</p>
                            <p class="p1 pr_1 font_w5 listGrow">訂單日期</p>
                            <p class="p1 pr_1 font_w5">訂單總額</p>
                            <p class="p1 pr_1 font_w5">訂單狀態</p>
                            <p class="p1 pr_1 font_w5 listGrow">訂單備註</p>
                            <p class=""></p>
                        </div>
                        <ul>
                            <template v-for="ordersRow in ordersRows">
                                <li is="O_menu" v-bind="ordersRow" :key="ordersRow.order_no"
                                    @edit-handler="editHandler(ordersRow.order_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let ordersRow = Vue.component('O_menu', {
                    props: ['order_no', 'member_no', 'order_datetime', 'payer_name', 'payer_phone', 'payer_address', 'credit_card', 'card_date', 'card_checkCode', 'recipient_name', 'recipient_phone', 'recipient_address', 'recipient_datetime', 'order_state', 'order_total', 'order_notes'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{order_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{member_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{order_datetime}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{order_total}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{order_state}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{order_notes}}</p>
                                <button class="p1 bkbtn" id="O_Edit" @click="$emit('edit-handler')" type="button">Details</button>
                            </div>
                        </li>
                    `,
                });
                let detailRow = Vue.component('OD_menu', {
                    props: ['order_no', 'product_no', 'product_name', 'order_count', 'product_price', 'recipient_datetime'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{product_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{order_count}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{product_price}}</p>
                                <p class=""></p>
                            </div>
                        </li>
                    `,
                });
                let ordersVue =
                    new Vue({
                        el: '#orderList',
                        data: {
                            fucusNo: 0,
                            ordersRows: [],
                            popupData: {
                                order_no: '',
                                member_no: ``,
                                order_datetime: ``,
                                payer_name: ``,
                                payer_phone: ``,
                                payer_address: ``,
                                credit_card: ``,
                                card_date: ``,
                                card_checkCode: ``,
                                recipient_name: ``,
                                recipient_phone: ``,
                                recipient_address: ``,
                                recipient_datetime: ``,
                                order_state: ``,
                                order_total: ``,
                                order_notes: ``
                            },
                            StateName: [
                                {
                                    id: 0,
                                    name: '待處理'
                                },
                                {
                                    id: 1,
                                    name: '待出貨'
                                },
                                {
                                    id: 2,
                                    name: '已出貨'
                                },
                                {
                                    id: 3,
                                    name: '訂單完成'
                                }
                            ],
                            detailRows: [],
                            popupDetail: []
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                ordersVue.ordersRows = JSON.parse(xhr.responseText);
                            }
                            xhr.open("get", "getProductOrders.php", true);
                            xhr.send(null);

                            let xhrD = new XMLHttpRequest();
                            xhrD.onload = function () {
                                ordersVue.detailRows = JSON.parse(xhrD.responseText);
                            }
                            xhrD.open("get", "getOrderdetail.php", true);
                            xhrD.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.ordersRows.find(v => v.order_no == this.fucusNo)) ? (this.ordersRows.find(v => v.order_no == this.fucusNo)) : this.ordersRows[0];
                            },
                            filterDetailRows() {
                                return this.detailRows.filter(v => v.order_no == this.fucusNo);
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                            filterDetailRows(nVal) {
                                this.popupDetail = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            ordersSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_ordersUpdateToDb.php", true);
                                let ordersSubDb = new FormData(document.getElementById("ordersModify"));
                                xhr.send(ordersSubDb);
                                document.getElementById("O_edit_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
            <!-- B優惠活動管理 -->
            <section class="mem_content" id="mainElm4">
                <div id="promList">
                    <!-- B優惠活動燈箱 -->
                    <div class="" id="B_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Create Promotions</p>
                            <form action="" id="promotionsForm" enctype="multipart/form-data"
                                class="ps_1 pe_1 pl_1 pr_1">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="" id="">
                                            </div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Start
                                                    Date</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date"
                                                    name="promotions_startDate" id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">End Date</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date"
                                                    name="promotions_endDate" id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="promotions_state" id="">
                                                    <option value="0">上架</option>
                                                    <option value="1">下架</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="B_upFile" id="B_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="B_promotionsImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Title</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                name="promotions_name" id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                style="vertical-align:top">Text</label></div>
                                        <div class="pl_1 pr_1"><textarea class="p1 tArea" name="promotions_text" id=""
                                                cols="100" rows="5"></textarea></div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="B_btnCancel" type="button">Cancel</button>
                                    <button id="B_btnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="promotionInsert">Confirm</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- B修改優惠活動燈箱 -->
                    <div class="" id="B_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Promotions</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="promotionsModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="promotions_no" id="" v-model="popupData.promotions_no"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Start
                                                    Date</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date"
                                                    name="promotions_startDate" id=""
                                                    v-model="popupData.promotions_startDate"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">End Date</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date"
                                                    name="promotions_endDate" id=""
                                                    v-model="popupData.promotions_endDate"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="promotions_state" id=""
                                                    v-model="popupData.promotions_state">
                                                    <option value="0">上架</option>
                                                    <option value="1">下架</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="promotions_img_origin"
                                                    :value="popupData.promotionsImage_path">
                                                <p style="padding-top: 8px" name="promotions_img_origin"
                                                    :value="popupData.promotionsImage_path">
                                                    目前檔名：{{popupData.promotionsImage_path}}</p>
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="promotionsImage_path"
                                                        id="B_E_promotionsImage"
                                                        :src="'images//'+ popupData.promotionsImage_path" alt="">
                                                </div>
                                                <input type="file" name="B_E_upFile" id="B_E_upFile">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Title</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                name="promotions_name" id="" v-model="popupData.promotions_name"></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                style="vertical-align:top">Text</label></div>
                                        <div class="pl_1 pr_1"><textarea class="p1 tArea" name="promotions_text" id=""
                                                cols="100" rows="5" v-model="popupData.promotions_text"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="B_EditBtnCancel" type="button">Cancel</button>
                                    <button id="B_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="promotionsSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Promotions Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 newListBtn"><button class="p1 bkbtn" id="B_New">✚ NEW</button></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">活動編號</p>
                            <p class="p1 pr_1 font_w5 listGrow">活動名稱</p>
                            <p class="p1 pr_1 font_w5">活動開始日期</p>
                            <p class="p1 pr_1 font_w5">活動結束日期</p>
                            <p class="p1 pr_1 font_w5 listGrow">活動內文</p>
                            <p class="p1 pr_1 font_w5 listGrow">圖片路徑</p>
                            <p class="p1 pr_1 font_w5">狀態</p>
                            <p></p>
                        </div>
                        <ul>
                            <template v-for="promoRow in promoRows">
                                <li is="B_menu" v-bind="promoRow" :key="promoRow.promotions_no"
                                    @edit-handler="editHandler(promoRow.promotions_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let promoRow = Vue.component('B_menu', {
                    props: ['promotions_no', 'promotions_name', 'promotions_startDate', 'promotions_endDate', 'promotions_state', 'promotionsImage_path', 'promotions_text'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{promotions_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{promotions_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{promotions_startDate}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{promotions_endDate}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{promotions_text}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{promotionsImage_path}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{promotions_state ? '下架' : '上架'}}</p>
                                <button class="p1 bkbtn" id="B_Edit" @click="$emit('edit-handler')" type="button">Edit</button>
                            </div>
                        </li>
                    `,
                });
                let promotionsVue =
                    new Vue({
                        el: '#promList',
                        data: {
                            fucusNo: 0,
                            promoRows: [],
                            popupData: {
                                promotions_no: '',
                                promotions_name: ``,
                                promotions_startDate: ``,
                                promotions_endDate: ``,
                                promotions_state: ``,
                                promotionsImage_path: ``,
                                promotions_text: ``
                            },
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                promotionsVue.promoRows = JSON.parse(xhr.responseText);

                            }
                            xhr.open("get", "getPromotions.php", true);
                            xhr.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.promoRows.find(v => v.promotions_no == this.fucusNo)) ? (this.promoRows.find(v => v.promotions_no == this.fucusNo)) : this.promoRows[0];
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            promotionsSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_promotionsUpdateToDb.php", true);
                                let promotionsSubDb = new FormData(document.getElementById("promotionsModify"));
                                xhr.send(promotionsSubDb);
                                document.getElementById("B_edit_lightBox").style.display = "none";
                            },
                            promotionInsert() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_promotionsInsert.php", true);
                                let promotionsSubDb = new FormData(document.getElementById("promotionsForm"));
                                xhr.send(promotionsSubDb);
                                document.getElementById("B_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
            <!-- C最新消息管理 -->
            <section class="mem_content" id="mainElm5">
                <div id="newsList">
                    <!-- C最新消息燈箱 -->
                    <div class="" id="C_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Create News</p>
                            <form id="newsForm" enctype="multipart/form-data" class="ps_1 pe_1 pl_1 pr_1">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="news_no"
                                                    id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Publish
                                                    Date</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date" name="news_publish"
                                                    id=""></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="news_state" id="">
                                                    <option value="0">上架</option>
                                                    <option value="1">下架</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Image</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="file" name="C_upFile" id="C_upFile">
                                                <div class="ps_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" id="C_newsImage"
                                                        src="./images/imgUpload.jpg" alt="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Title</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                name="news_title" id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                style="vertical-align:top">Text</label></div>
                                        <div class="pl_1 pr_1"><textarea class="p1 tArea" name="news_text" id=""
                                                cols="100" rows="5"></textarea></div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="C_btnCancel" type="button">Cancel</button>
                                    <button id="C_btnAdd" class="ml_1 p1 bkbtn" type="button">Confirm</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- C修改最新消息燈箱 -->
                    <div class="" id="C_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit News</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="newsModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="news_no"
                                                    id="" v-model="popupData.news_no" readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Publish
                                                    Date</label></div>
                                            <div class="pl_1 pr_1"><input class="tyDate" type="date" name="news_publish"
                                                    id="" v-model="popupData.news_publish"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <select name="news_state" id="" v-model="popupData.news_state">
                                                    <option value="0">上架</option>
                                                    <option value="1">下架</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="news_img_origin"
                                                    :value="popupData.newsImage_path">
                                                <p style="padding-top: 8px" name="news_img_origin"
                                                    :value="popupData.newsImage_path">目前檔名：{{popupData.newsImage_path}}
                                                </p>
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="newsImage_path"
                                                        id="C_E_newsImage" :src="'images//'+ popupData.newsImage_path"
                                                        alt="">
                                                </div>
                                                <input type="file" name="C_E_upFile" id="C_E_upFile">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Title</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                name="news_title" id="" v-model="popupData.news_title"></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for=""
                                                style="vertical-align:top">Text</label></div>
                                        <div class="pl_1 pr_1"><textarea class="p1 tArea" name="news_text" id=""
                                                cols="100" rows="5" v-model="popupData.news_text"></textarea></div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="C_EditBtnCancel" type="button">Cancel</button>
                                    <button id="C_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="newsSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">News Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 newListBtn"><button class="p1 bkbtn" id="C_New" type="button">✚
                                NEW</button></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">消息編號</p>
                            <p class="p1 pr_1 font_w5 listGrow">消息名稱</p>
                            <p class="p1 pr_1 font_w5">消息發佈日期</p>
                            <p class="p1 pr_1 font_w5 listGrow">消息內文</p>
                            <p class="p1 pr_1 font_w5 listGrow">消息圖片路徑</p>
                            <p class="p1 pr_1 font_w5">狀態</p>
                            <p></p>
                        </div>
                        <ul>
                            <template v-for="newsRow in newsRows">
                                <li is="C_menu" v-bind="newsRow" :key="newsRow.news_no"
                                    @edit-handler="editHandler(newsRow.news_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let newsRow = Vue.component('C_menu', {
                    props: ['news_no', 'news_title', 'news_publish', 'news_text', 'newsImage_path', 'news_state'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{news_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{news_title}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{news_publish}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{news_text}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow"><img :src="'images//'+ newsImage_path" alt=""></p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor state">{{news_state ? '下架' : '上架'}}</p>
                                <button class="p1 bkbtn" id="C_Edit" @click="$emit('edit-handler')" type="button">Edit</button>
                            </div>
                        </li>
                    `,
                });
                let newsVue =
                    new Vue({
                        el: '#newsList',
                        data: {
                            fucusNo: 0,
                            newsRows: [],
                            popupData: {
                                news_no: '',
                                news_title: ``,
                                news_publish: ``,
                                news_text: ``,
                                newsImage_path: ``,
                                news_state: ``
                            },
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                newsVue.newsRows = JSON.parse(xhr.responseText);

                            }
                            xhr.open("get", "getNews.php", true);
                            xhr.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.newsRows.find(v => v.news_no == this.fucusNo)) ? (this.newsRows.find(v => v.news_no == this.fucusNo)) : this.newsRows[0];
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            newsSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_newsUpdateToDb.php", true);
                                let newsSubDb = new FormData(document.getElementById("newsModify"));
                                xhr.send(newsSubDb);
                                document.getElementById("C_edit_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
            <!-- P輪播管理 -->
            <section class="mem_content" id="mainElm6">
                <div id="carouselList">
                    <!-- P修改輪播燈箱 -->
                    <div class="" id="P_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Carousel</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="carouselsModify" enctype="multipart/form-data">
                                <div class="formOne">
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                            <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                    name="carousel_no" id="" v-model="popupData.carousel_no"
                                                    readonly="readonly"></div>
                                        </div>
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label>
                                            </div>
                                            <div class="pl_1 pr_1"><input class="ip_normal ip_width" type="text"
                                                    name="carousel_name" id="" v-model="popupData.carousel_name"></div>
                                        </div>
                                    </div>
                                    <div style="width:50%">
                                        <div class="ps_1 pe_1 LBcol">
                                            <div class="pl_1 pr_1 LBcolTitle">
                                                <label class="p1" for="">Image</label>
                                            </div>
                                            <div class="pl_1 pr_1">
                                                <input type="hidden" name="carousels_img_origin"
                                                    :value="popupData.carousel_path">
                                                <p style="padding-top: 8px" name="carousels_img_origin"
                                                    :value="popupData.carousel_path">目前檔名：{{popupData.carousel_path}}
                                                </p>
                                                <div class="ps_1 pe_1" style="width:310px; height: 173px">
                                                    <img style="width:auto; height: 173px" name="carousel_path"
                                                        id="P_E_carouselsImage"
                                                        :src="'images//'+ popupData.carousel_path" alt="">
                                                </div>
                                                <input type="file" name="P_E_upFile" id="P_E_upFile">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="P_EditBtnCancel" type="button">Cancel</button>
                                    <button id="P_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="carouselsSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Carousel</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 ps_2"></div>
                        <div class="pr_1 backend_title">
                            <p class="p1 pr_1 font_w5">編號</p>
                            <p class="p1 mr_1 pr_1 font_w5 listGrow">名稱</p>
                            <p class="p1 pr_1 font_w5 listGrow">圖片預覽</p>
                            <p class=""></p>
                        </div>
                        <ul>
                            <template v-for="carouselRow in carouselRows">
                                <li is="P_menu" v-bind="carouselRow" :key="carouselRow.carousel_no"
                                    @edit-handler="editHandler(carouselRow.carousel_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let carouselRow = Vue.component('P_menu', {
                    props: ['carousel_no', 'carousel_name', 'carousel_path'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text carouselPlace">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{carousel_no}}</p>
                                <p class="p1 mr_1 pr_1 font_w5 fontcontent fontColor listGrow">{{carousel_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow"><img :src="'images//'+ carousel_path"></img></p>
                                <p><button class="p1 bkbtn" id="P_Edit" @click="$emit('edit-handler')" type="button">Upload</button></p>
                                
                            </div>
                        </li>
                    `,
                });
                let carouselVue =
                    new Vue({
                        el: '#carouselList',
                        data: {
                            fucusNo: 0,
                            carouselRows: [],
                            popupData: {
                                carousel_no: '',
                                carousel_name: ``,
                                carousel_path: ``
                            },
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                carouselVue.carouselRows = JSON.parse(xhr.responseText);
                            }
                            xhr.open("get", "getCarousels.php", true);
                            xhr.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.carouselRows.find(v => v.carousel_no == this.fucusNo)) ? (this.carouselRows.find(v => v.carousel_no == this.fucusNo)) : this.carouselRows[0];
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            carouselsSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_carouselsUpdateToDb.php", true);
                                let carouselsSubDb = new FormData(document.getElementById("carouselsModify"));
                                xhr.send(carouselsSubDb);
                                document.getElementById("P_edit_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
            <!-- D後台管理員 -->
            <section class="mem_content" id="mainElm7">
                <div id="managersList">
                    <!-- D管理員燈箱 -->
                    <div class="" id="D_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Create Manager</p>
                            <form id="managersForm" enctype="multipart/form-data" class="ps_1 pe_1 pl_1 pr_1">
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="manager_no"
                                                id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="manager_name"
                                                id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Role</label>
                                        </div>
                                        <div class="pl_1 pr_1">
                                            <select name="role" id="">
                                                <option value="後台管理人員">後台管理人員</option>
                                                <option value="設計師">設計師</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Account</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                name="manager_account" id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Password</label>
                                        </div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="password"
                                                name="manager_password" id=""></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                        </div>
                                        <div class="pl_1 pr_1">
                                            <select name="state" id="">
                                                <option value="0">正常</option>
                                                <option value="1">凍結</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="D_btnCancel" type="button">Cancel</button>
                                    <button id="D_btnAdd" class="ml_1 p1 bkbtn" type="button">Confirm</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- D修改管理員燈箱 -->
                    <div class="" id="D_edit_lightBox" style="display:none">
                        <div class="lightBox_list">
                            <p class="ps_1 pe_1 pl_2 h1 lightBox_title">Edit Manager</p>
                            <form class="ps_1 pe_1 pl_1 pr_1" id="managersModify" enctype="multipart/form-data">
                                <div class="formOne formThree">
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">No.</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="manager_no"
                                                id="" v-model="popupData.manager_no" readonly="readonly"></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Name</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text" name="manager_name"
                                                id="" v-model="popupData.manager_name"></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Role</label>
                                        </div>
                                        <div class="pl_1 pr_1">
                                            <select name="role" id="" v-model="popupData.role">
                                                <option value="後台管理人員">後台管理人員</option>
                                                <option value="設計師">設計師</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Account</label></div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="text"
                                                name="manager_account" id="" v-model="popupData.manager_account"></div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">Password</label>
                                        </div>
                                        <div class="pl_1 pr_1"><input class="ip_normal" type="password"
                                                name="manager_password" id="" v-model="popupData.manager_password">
                                        </div>
                                    </div>
                                    <div class="ps_1 pe_1 LBcol">
                                        <div class="pl_1 pr_1 LBcolTitle"><label class="p1" for="">State</label>
                                        </div>
                                        <div class="pl_1 pr_1">
                                            <select name="state" id="" v-model="popupData.state">
                                                <option value="0">正常</option>
                                                <option value="1">凍結</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="ps_1 pr_1 lastBtn">
                                    <button class="ml_1 p1 bkbtn" id="D_EditBtnCancel" type="button">Cancel</button>
                                    <button id="D_EditBtnAdd" class="ml_1 p1 bkbtn" type="button"
                                        @click="managersSub">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1 backend_titleH1">
                        <h1 class="h1 font_w5 fontTitle">Manage</h1>
                    </div>
                    <div class="ps_1 pe_1 pl_1 pr_1">
                        <div class="pr_1 pe_1 newListBtn"><button class="p1 bkbtn" id="D_New">✚ NEW</button></div>
                        <div class="backend_title">
                            <p class="p1 pr_1 font_w5">人員編號</p>
                            <p class="p1 pr_1 font_w5 listGrow">人員姓名</p>
                            <p class="p1 pr_1 font_w5 listGrow">人員帳號</p>
                            <p class="p1 pr_1 font_w5 listGrow">人員類別</p>
                            <p class="p1 pr_1 font_w5">人員狀態</p>
                            <p></p>
                        </div>
                        <ul>
                            <template v-for="managersRow in managersRows">
                                <li is="D_menu" v-bind="managersRow" :key="managersRow.manager_no"
                                    @edit-handler="editHandler(managersRow.manager_no)"></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </section>
            <script>
                let managersRow = Vue.component('D_menu', {
                    props: ['manager_no', 'manager_name', 'manager_account', 'manager_password', 'role', 'state'],
                    template: `
                        <li class="backend_details">
                            <div class="backend_text">
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{manager_no}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{manager_name}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{manager_account}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor listGrow">{{role}}</p>
                                <p class="p1 pr_1 font_w5 fontcontent fontColor">{{state ? '凍結' : '正常'}}</p>
                                <button class="p1 bkbtn" id="D_Edit" @click="$emit('edit-handler')" type="button">Edit</button>
                            </div>
                        </li>
                    `,
                });
                let managersVue =
                    new Vue({
                        el: '#managersList',
                        data: {
                            fucusNo: 0,
                            managersRows: [],
                            popupData: {
                                manager_no: '',
                                manager_name: ``,
                                manager_account: ``,
                                manager_password: ``,
                                role: ``,
                                state: ``
                            },
                        },
                        created() {
                            let xhr = new XMLHttpRequest();
                            xhr.onload = function () {
                                managersVue.managersRows = JSON.parse(xhr.responseText);

                            }
                            xhr.open("get", "getManagers.php", true);
                            xhr.send(null);
                        },
                        computed: {
                            focusObj() {
                                return (this.managersRows.find(v => v.manager_no == this.fucusNo)) ? (this.managersRows.find(v => v.manager_no == this.fucusNo)) : this.managersRows[0];
                            },
                        },
                        watch: {
                            focusObj(nVal) {
                                this.popupData = JSON.parse(JSON.stringify(nVal));
                            },
                        },
                        methods: {
                            editHandler(no) {
                                this.fucusNo = no;
                            },
                            managersSub() {
                                let xhr = new XMLHttpRequest();
                                xhr.onload = () => {
                                    alert(xhr.responseText);
                                };
                                xhr.open("post", "backend_managersUpdateToDb.php", true);
                                let managersSubDb = new FormData(document.getElementById("managersModify"));
                                xhr.send(managersSubDb);
                                document.getElementById("D_edit_lightBox").style.display = "none";
                            }
                        },
                    })
            </script>
        </div>
    </div>
    <script src="./js/backendLightBox.js"></script>
</body>

</html>